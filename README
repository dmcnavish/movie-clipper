````markdown
# ğŸ¬ Movie Clipper â€” TikTok Scene Generator

CLI tool to:
âœ… Read list of movies  
âœ… Ask ChatGPT for popular scenes (via `/v1/responses` API)  
âœ… Parse GPT scene timestamps  
âœ… Clip scenes directly from GPT timestamps  
âœ… Burn subtitles (optional, ON by default)  
âœ… Output vertical 1080x1920 (or custom scale) clips for TikTok  
âœ… Keeps previous runs safe by using unique filenames ğŸš€

---

## âš™ï¸ Setup (Mac)

### 1ï¸âƒ£ Install dependencies

```bash
# Install ffmpeg
brew install ffmpeg

# Install Python 3 (if not already installed)
brew install python

# Install Node.js dependencies
npm install
````

---

## ğŸ”‘ Set OpenAI API Key

This project now uses the **`/v1/responses` API**, which requires a **project key** (`sk-proj-xxx`).

```bash
export OPENAI_API_KEY=sk-proj-XXXXXXXXXXXXXXXXXXXXXXXX
```

---

## ğŸ Python Virtual Environment (venv) â€” Recommended

It is strongly recommended to use a Python virtual environment for this project, to avoid system Python conflicts and to comply with latest Homebrew Python best practices (PEP 668).

---

### âš™ï¸ How to set up venv (one-time setup)

```bash
# 1ï¸âƒ£ Create virtual environment
python3 -m venv venv

# 2ï¸âƒ£ Activate the virtual environment
source venv/bin/activate

# 3ï¸âƒ£ Install PySceneDetect
pip install scenedetect
```

---

### ğŸš€ How to activate venv each time you want to run movie-clipper

```bash
cd ~/Development/workspace/js/movie-clipper
source venv/bin/activate
node index.js movies.json
```

---

### ğŸ’¤ How to deactivate venv

```bash
deactivate
```

---

### ğŸ“… When do you need to activate it?

| Situation                             | Do you need to activate venv? |
| ------------------------------------- | ----------------------------- |
| Running movie-clipper                 | âœ… Yes â€” activate venv first   |
| Opened a new terminal window          | âœ… Yes â€” activate venv again   |
| Just using Node.js (other JS project) | âŒ No â€” no venv needed         |
| Switching to other Python project     | Optional â€” deactivate first   |

---

### ğŸ Why use venv?

âœ… Keeps the Python environment isolated
âœ… Avoids conflicts with system Python
âœ… Works with latest Homebrew Python (which uses PEP 668 "externally managed")
âœ… Ensures that `movie-clipper` always runs cleanly across Macs, Node versions, Python versions

---

### ğŸ“‚ Folder Structure

```
movie-clipper/
â”œâ”€â”€ index.js
â”œâ”€â”€ package.json
â”œâ”€â”€ movies.json
â”œâ”€â”€ README.md
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ sceneHelpers.js
â”œâ”€â”€ scenes/        (output clips go here)
â”œâ”€â”€ movies/        (put movie files here)
â””â”€â”€ venv/          (your local Python venv)
```

---

### ğŸ“ Example `.gitignore`

```gitignore
# Python venv
venv/

# Node modules (if you add any frontend tools later)
node_modules/

# Output clips
scenes/
```

---

## ğŸš€ Run movie-clipper

### Default (calls OpenAI `/v1/responses` API, full scale 1080x1920)

```bash
source venv/bin/activate
node index.js movies.json
```

---

### Disable subtitles

```bash
source venv/bin/activate
node index.js movies.json --no-subs
```

---

### Limit number of scenes (default is 4)

```bash
source venv/bin/activate
node index.js movies.json --max-scenes=2
```

---

### Set custom scale (for faster testing)

```bash
source venv/bin/activate
node index.js movies.json --scale=540:960
```

Super fast debug:

```bash
source venv/bin/activate
node index.js movies.json --scale=360:640
```

---

### Run in mock mode (no API calls, static scenes)

```bash
source venv/bin/activate
node index.js movies.json --mock
```

---

### Combine options

```bash
source venv/bin/activate
node index.js movies.json --mock --max-scenes=2 --scale=360:640 --no-subs
```

---

### ğŸš€ Explanation of CLI options

| Option                 | Description                                                              |
| ---------------------- | ------------------------------------------------------------------------ |
| `--mock`               | Use mock static response (no API calls)                                  |
| `--no-subs`            | Disable subtitles in output clips                                        |
| `--max-scenes=N`       | Limit number of scenes to generate (default: 4)                          |
| `--scale=WIDTH:HEIGHT` | Set output resolution (default: 1080:1920). Lower for faster test clips. |

---

## âœ… Example `movies.json`

```json
[
  {
    "title": "Night of the Living Dead",
    "version": "Original",
    "frame_rate": "24",
    "file_path": "./movies/night_of_the_living_dead.mp4"
  }
]
```

---

## ğŸš€ How it works

1ï¸âƒ£ Calls `/v1/responses` with your movie title â†’ gets popular scenes with timestamps
2ï¸âƒ£ Parses GPT timestamps
3ï¸âƒ£ Calls `clipScene()` directly â€” no PySceneDetect needed
4ï¸âƒ£ Outputs vertical video clips to `scenes/`

---

## ğŸš€ Output Files â€” Naming

âœ… If a clip with the same name already exists, the program will automatically add a **timestamp** to the filename to ensure uniqueness.

Example:

```text
House_on_Haunted_Hill_Scene1.mp4
House_on_Haunted_Hill_Scene1_1717194859123.mp4
```

âœ… This prevents ffmpeg hangs and allows you to test multiple variations without losing previous clips.

---

## Notes

* Uses new `/v1/responses` API with project key (`sk-proj-xxx`)
* Now clips scenes directly from GPT timestamps â€” no PySceneDetect needed
* `--mock` mode allows fast testing with static data
* `--scale` option allows fast generation at lower resolution
* Output clips are safe from overwrites (timestamped if needed)
* Great for TikTok / Shorts automation ğŸš€

---

**Enjoy â€” and post some awesome clips!** ğŸ˜
